"use strict";
// Email Verification Template - B2C Customer Email Verification
// Replaces: Firebase's default sendEmailVerification emails
// Used for: B2C customer email verification during registration/checkout
exports.__esModule = true;
exports.generateEmailVerificationTemplate = void 0;
var config_1 = require("../core/config");
function generateEmailVerificationTemplate(data) {
    var customerInfo = data.customerInfo, verificationCode = data.verificationCode, language = data.language, source = data.source;
    // Generate verification URL
    var languageSegment = language === 'sv-SE' ? 'se' : language === 'en-GB' ? 'uk' : 'us';
    var verificationUrl = "".concat(config_1.EMAIL_CONFIG.URLS.B2C_SHOP, "/").concat(languageSegment, "/verify-email?oobCode=").concat(verificationCode);
    var shopUrl = "".concat(config_1.EMAIL_CONFIG.URLS.B2C_SHOP, "/").concat(languageSegment);
    var supportUrl = "".concat(config_1.EMAIL_CONFIG.URLS.B2B_PORTAL, "/contact");
    // Get customer name
    var customerName = customerInfo.firstName || customerInfo.name || 'Kund';
    var templates = {
        'sv-SE': {
            subject: 'Verifiera din e-postadress - B8Shield',
            html: generateSwedishTemplate(customerName, verificationUrl, shopUrl, supportUrl, source)
        },
        'en-GB': {
            subject: 'Verify your email address - B8Shield',
            html: generateEnglishTemplate(customerName, verificationUrl, shopUrl, supportUrl, source, 'programme', 'Kind regards')
        },
        'en-US': {
            subject: 'Verify your email address - B8Shield',
            html: generateEnglishTemplate(customerName, verificationUrl, shopUrl, supportUrl, source, 'program', 'Best regards')
        }
    };
    var template = templates[language] || templates['sv-SE'];
    return {
        subject: template.subject,
        html: template.html
    };
}
exports.generateEmailVerificationTemplate = generateEmailVerificationTemplate;
function generateSwedishTemplate(customerName, verificationUrl, shopUrl, supportUrl, source) {
    var isCheckout = source === 'checkout';
    return "\n<div style=\"font-family: ".concat(config_1.EMAIL_CONFIG.FONTS.PRIMARY, "; max-width: 600px; margin: 0 auto; background-color: #f9fafb; padding: 20px;\">\n  <div style=\"background-color: white; border-radius: 8px; padding: 30px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);\">\n    <div style=\"text-align: center; margin-bottom: 30px;\">\n      <img src=\"").concat(config_1.EMAIL_CONFIG.URLS.LOGO_URL, "\" alt=\"B8Shield\" style=\"max-width: 200px; height: auto;\">\n    </div>\n    \n    <h2 style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_PRIMARY, "; margin-bottom: 20px; font-size: 24px; text-align: center;\">Hej ").concat(customerName, "!</h2>\n    <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_SECONDARY, "; line-height: 1.6; margin-bottom: 20px; text-align: center;\">\n      ").concat(isCheckout
        ? 'Tack för din beställning! För att slutföra din kontoregistrering behöver vi verifiera din e-postadress.'
        : 'Välkommen till B8Shield! För att aktivera ditt konto behöver vi verifiera din e-postadress.', "\n    </p>\n    \n    <div style=\"background-color: #ecfdf5; padding: 20px; border-radius: 8px; margin-bottom: 25px; border-left: 4px solid #10b981;\">\n      <h3 style=\"color: #065f46; margin-top: 0; margin-bottom: 15px; font-size: 18px;\">[VERIFIERING] Bekr\u00E4fta din e-postadress</h3>\n      <p style=\"color: #065f46; margin-bottom: 15px; font-size: 14px;\">\n        Klicka p\u00E5 knappen nedan f\u00F6r att verifiera din e-postadress och ").concat(isCheckout ? 'få tillgång till din orderhistorik' : 'aktivera ditt konto', ":\n      </p>\n    </div>\n    \n    <div style=\"text-align: center; margin: 30px 0;\">\n      <a href=\"").concat(verificationUrl, "\" style=\"display: inline-block; background-color: ").concat(config_1.EMAIL_CONFIG.COLORS.PRIMARY, "; color: #ffffff; padding: 14px 28px; text-decoration: none; border-radius: 8px; font-weight: bold; font-size: 16px; border: 2px solid ").concat(config_1.EMAIL_CONFIG.COLORS.PRIMARY, ";\">Verifiera e-postadress</a>\n    </div>\n    \n    <div style=\"background-color: #fef3c7; border-left: 4px solid #f59e0b; padding: 15px; margin-bottom: 25px; border-radius: 4px;\">\n      <h4 style=\"color: #92400e; margin-top: 0; margin-bottom: 10px; font-size: 16px;\">[VIKTIGT] Om knappen inte fungerar</h4>\n      <p style=\"color: #78350f; margin: 0; font-size: 14px; line-height: 1.5;\">\n        Kopiera och klistra in denna l\u00E4nk i din webbl\u00E4sare:<br>\n        <a href=\"").concat(verificationUrl, "\" style=\"color: #92400e; word-break: break-all; font-size: 12px;\">").concat(verificationUrl, "</a>\n      </p>\n    </div>\n    \n    <div style=\"background-color: #eff6ff; padding: 20px; border-radius: 6px; margin-bottom: 25px;\">\n      <h4 style=\"color: #1e40af; margin-top: 0; margin-bottom: 15px; font-size: 16px;\">[KONTO] Vad du f\u00E5r tillg\u00E5ng till:</h4>\n      <ul style=\"color: #1e40af; margin: 0; padding-left: 20px; font-size: 14px;\">\n        <li>Se din orderhistorik och sp\u00E5ra leveranser</li>\n        <li>Uppdatera din profil och leveransadresser</li>\n        <li>F\u00E5 exklusiva erbjudanden och nyheter</li>\n        <li>Snabbare checkout vid framtida k\u00F6p</li>\n        ").concat(isCheckout ? '<li>Ladda ner kvitton och fakturor</li>' : '', "\n      </ul>\n    </div>\n    \n    <div style=\"text-align: center; margin: 25px 0;\">\n      <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_MUTED, "; font-size: 14px; margin-bottom: 15px;\">\n        Eller bes\u00F6k v\u00E5r butik direkt:\n      </p>\n      <a href=\"").concat(shopUrl, "\" style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.LINK, "; text-decoration: none; font-weight: 600;\">shop.b8shield.com</a>\n    </div>\n    \n    <div style=\"background-color: #f3f4f6; padding: 15px; border-radius: 6px; margin-bottom: 25px;\">\n      <h4 style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_SECONDARY, "; margin-top: 0; margin-bottom: 10px; font-size: 16px;\">[SUPPORT] Beh\u00F6ver du hj\u00E4lp?</h4>\n      <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_MUTED, "; margin: 0; font-size: 14px;\">\n        Om du har problem med verifieringen eller andra fr\u00E5gor, kontakta v\u00E5r support p\u00E5 <a href=\"").concat(supportUrl, "\" style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.LINK, ";\">").concat(supportUrl, "</a>\n      </p>\n    </div>\n    \n    <div style=\"border-top: 1px solid #e5e7eb; padding-top: 20px; margin-top: 30px; text-align: center;\">\n      <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_MUTED, "; font-size: 14px; margin: 0;\">Med v\u00E4nliga h\u00E4lsningar,<br><strong>B8Shield Team</strong><br>JPH Innovation AB</p>\n      <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_MUTED, "; font-size: 12px; margin: 10px 0 0 0;\">\n        Om du inte har skapat ett konto hos B8Shield kan du ignorera detta e-postmeddelande.\n      </p>\n    </div>\n  </div>\n</div>");
}
function generateEnglishTemplate(customerName, verificationUrl, shopUrl, supportUrl, source, programWord, signOff) {
    var isCheckout = source === 'checkout';
    return "\n<div style=\"font-family: ".concat(config_1.EMAIL_CONFIG.FONTS.PRIMARY, "; max-width: 600px; margin: 0 auto; background-color: #f9fafb; padding: 20px;\">\n  <div style=\"background-color: white; border-radius: 8px; padding: 30px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);\">\n    <div style=\"text-align: center; margin-bottom: 30px;\">\n      <img src=\"").concat(config_1.EMAIL_CONFIG.URLS.LOGO_URL, "\" alt=\"B8Shield\" style=\"max-width: 200px; height: auto;\">\n    </div>\n    \n    <h2 style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_PRIMARY, "; margin-bottom: 20px; font-size: 24px; text-align: center;\">Hello ").concat(customerName, "!</h2>\n    <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_SECONDARY, "; line-height: 1.6; margin-bottom: 20px; text-align: center;\">\n      ").concat(isCheckout
        ? 'Thank you for your order! To complete your account registration, we need to verify your email address.'
        : 'Welcome to B8Shield! To activate your account, we need to verify your email address.', "\n    </p>\n    \n    <div style=\"background-color: #ecfdf5; padding: 20px; border-radius: 8px; margin-bottom: 25px; border-left: 4px solid #10b981;\">\n      <h3 style=\"color: #065f46; margin-top: 0; margin-bottom: 15px; font-size: 18px;\">[VERIFICATION] Confirm your email address</h3>\n      <p style=\"color: #065f46; margin-bottom: 15px; font-size: 14px;\">\n        Click the button below to verify your email address and ").concat(isCheckout ? 'access your order history' : 'activate your account', ":\n      </p>\n    </div>\n    \n    <div style=\"text-align: center; margin: 30px 0;\">\n      <a href=\"").concat(verificationUrl, "\" style=\"display: inline-block; background-color: ").concat(config_1.EMAIL_CONFIG.COLORS.PRIMARY, "; color: #ffffff; padding: 14px 28px; text-decoration: none; border-radius: 8px; font-weight: bold; font-size: 16px; border: 2px solid ").concat(config_1.EMAIL_CONFIG.COLORS.PRIMARY, ";\">Verify Email Address</a>\n    </div>\n    \n    <div style=\"background-color: #fef3c7; border-left: 4px solid #f59e0b; padding: 15px; margin-bottom: 25px; border-radius: 4px;\">\n      <h4 style=\"color: #92400e; margin-top: 0; margin-bottom: 10px; font-size: 16px;\">[IMPORTANT] If the button doesn't work</h4>\n      <p style=\"color: #78350f; margin: 0; font-size: 14px; line-height: 1.5;\">\n        Copy and paste this link into your browser:<br>\n        <a href=\"").concat(verificationUrl, "\" style=\"color: #92400e; word-break: break-all; font-size: 12px;\">").concat(verificationUrl, "</a>\n      </p>\n    </div>\n    \n    <div style=\"background-color: #eff6ff; padding: 20px; border-radius: 6px; margin-bottom: 25px;\">\n      <h4 style=\"color: #1e40af; margin-top: 0; margin-bottom: 15px; font-size: 16px;\">[ACCOUNT] What you'll get access to:</h4>\n      <ul style=\"color: #1e40af; margin: 0; padding-left: 20px; font-size: 14px;\">\n        <li>View your order history and track deliveries</li>\n        <li>Update your profile and delivery addresses</li>\n        <li>Receive exclusive offers and news</li>\n        <li>Faster checkout for future purchases</li>\n        ").concat(isCheckout ? '<li>Download receipts and invoices</li>' : '', "\n      </ul>\n    </div>\n    \n    <div style=\"text-align: center; margin: 25px 0;\">\n      <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_MUTED, "; font-size: 14px; margin-bottom: 15px;\">\n        Or visit our shop directly:\n      </p>\n      <a href=\"").concat(shopUrl, "\" style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.LINK, "; text-decoration: none; font-weight: 600;\">shop.b8shield.com</a>\n    </div>\n    \n    <div style=\"background-color: #f3f4f6; padding: 15px; border-radius: 6px; margin-bottom: 25px;\">\n      <h4 style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_SECONDARY, "; margin-top: 0; margin-bottom: 10px; font-size: 16px;\">[SUPPORT] Need help?</h4>\n      <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_MUTED, "; margin: 0; font-size: 14px;\">\n        If you're having trouble with verification or have other questions, please contact our support at <a href=\"").concat(supportUrl, "\" style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.LINK, ";\">").concat(supportUrl, "</a>\n      </p>\n    </div>\n    \n    <div style=\"border-top: 1px solid #e5e7eb; padding-top: 20px; margin-top: 30px; text-align: center;\">\n      <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_MUTED, "; font-size: 14px; margin: 0;\">").concat(signOff || 'Best regards', ",<br><strong>The B8Shield Team</strong><br>JPH Innovation AB</p>\n      <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_MUTED, "; font-size: 12px; margin: 10px 0 0 0;\">\n        If you didn't create an account with B8Shield, you can safely ignore this email.\n      </p>\n    </div>\n  </div>\n</div>");
}
