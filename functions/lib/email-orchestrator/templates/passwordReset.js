"use strict";
exports.__esModule = true;
exports.generatePasswordResetTemplate = void 0;
// Password Reset Email Template
// Extracted from V3 passwordReset template - DESIGN PRESERVED + MOBILE OPTIMIZED
var config_1 = require("../core/config");
function generatePasswordResetTemplate(data, lang) {
    if (lang === void 0) { lang = 'sv-SE'; }
    var email = data.email, resetCode = data.resetCode, userAgent = data.userAgent, timestamp = data.timestamp, userType = data.userType;
    // Generate appropriate URLs based on user type
    var segment = (0, config_1.getLanguageSegment)(lang);
    var resetUrl;
    var loginUrl;
    if (userType === 'AFFILIATE' || userType === 'B2B') {
        resetUrl = "".concat(config_1.EMAIL_CONFIG.URLS.B2C_SHOP, "/").concat(segment, "/reset-password?code=").concat(resetCode);
        loginUrl = "".concat(config_1.EMAIL_CONFIG.URLS.B2C_SHOP, "/").concat(segment, "/affiliate-login");
    }
    else {
        // B2C customers
        resetUrl = "".concat(config_1.EMAIL_CONFIG.URLS.B2C_SHOP, "/").concat(segment, "/reset-password?code=").concat(resetCode);
        loginUrl = "".concat(config_1.EMAIL_CONFIG.URLS.B2C_SHOP, "/").concat(segment, "/customer-login");
    }
    var templates = {
        'sv-SE': {
            subject: 'Återställ ditt B8Shield-lösenord',
            html: "<div style=\"font-family: ".concat(config_1.EMAIL_CONFIG.TEMPLATES.FONT_FAMILY, "; max-width: ").concat(config_1.EMAIL_CONFIG.TEMPLATES.MAX_WIDTH, "; margin: 0 auto; background-color: ").concat(config_1.EMAIL_CONFIG.COLORS.BACKGROUND, "; padding: 15px;\">\n  <div style=\"background-color: white; border-radius: ").concat(config_1.EMAIL_CONFIG.TEMPLATES.BORDER_RADIUS, "; padding: 25px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);\">\n    <div style=\"text-align: center; margin-bottom: 25px;\">\n      <img src=\"").concat(config_1.EMAIL_CONFIG.URLS.LOGO_URL, "\" alt=\"B8Shield\" style=\"max-width: 180px; height: auto; display: block; margin: 0 auto;\">\n    </div>\n    \n    <h2 style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_PRIMARY, "; margin-bottom: 18px; font-size: 20px; line-height: 1.3;\">\u00C5terst\u00E4ll ditt l\u00F6senord</h2>\n    <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_SECONDARY, "; line-height: 1.6; margin-bottom: 18px; font-size: 15px;\">Hej!</p>\n    <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_SECONDARY, "; line-height: 1.6; margin-bottom: 20px; font-size: 15px;\">Vi fick en beg\u00E4ran om att \u00E5terst\u00E4lla l\u00F6senordet f\u00F6r ditt B8Shield-konto som \u00E4r kopplat till <strong>").concat(email, "</strong>.</p>\n    \n    <div style=\"background-color: #fef3c7; border-left: 4px solid ").concat(config_1.EMAIL_CONFIG.COLORS.WARNING, "; padding: 15px; margin-bottom: 20px; border-radius: 4px;\">\n      <h4 style=\"color: #92400e; margin-top: 0; margin-bottom: 10px; font-size: 15px;\">[S\u00C4KERHET] VIKTIG INFORMATION:</h4>\n      <ul style=\"color: #92400e; margin: 0; padding-left: 18px; font-size: 14px; line-height: 1.4;\">\n        <li style=\"margin-bottom: 5px;\">Denna l\u00E4nk \u00E4r giltig i <strong>60 minuter</strong></li>\n        <li style=\"margin-bottom: 5px;\">L\u00E4nken kan endast anv\u00E4ndas en g\u00E5ng</li>\n        <li>Om du inte beg\u00E4rde denna \u00E5terst\u00E4llning, ignorera detta e-post</li>\n      </ul>\n    </div>\n    \n    <div style=\"background-color: #eff6ff; padding: 18px; border-radius: 6px; margin-bottom: 20px;\">\n      <h4 style=\"color: #1e40af; margin-top: 0; margin-bottom: 12px; font-size: 15px;\">[\u00C5TERST\u00C4LLNING] KLICKA H\u00C4R F\u00D6R ATT \u00C5TERST\u00C4LLA:</h4>\n      <div style=\"text-align: center; margin: 18px 0;\">\n        <a href=\"").concat(resetUrl, "\" style=\"display: inline-block; background-color: ").concat(config_1.EMAIL_CONFIG.COLORS.PRIMARY, "; color: #ffffff; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: bold; font-size: 15px; border: 2px solid ").concat(config_1.EMAIL_CONFIG.COLORS.PRIMARY, ";\">\u00C5terst\u00E4ll mitt l\u00F6senord</a>\n      </div>\n      <p style=\"color: #1e40af; margin-bottom: 8px; font-size: 13px;\">Eller kopiera och klistra in denna l\u00E4nk i din webbl\u00E4sare:</p>\n      <div style=\"background-color: #dbeafe; padding: 10px; border-radius: 4px; border-left: 4px solid #2563eb; word-break: break-all; font-size: 13px;\">\n        <a href=\"").concat(resetUrl, "\" style=\"color: #1e40af; text-decoration: none;\">").concat(resetUrl, "</a>\n      </div>\n    </div>\n    \n    <div style=\"background-color: #ecfdf5; padding: 15px; border-radius: 6px; margin-bottom: 20px;\">\n      <h4 style=\"color: #065f46; margin-top: 0; margin-bottom: 12px; font-size: 15px;\">[N\u00C4STA STEG] EFTER \u00C5TERST\u00C4LLNING:</h4>\n      <ol style=\"color: #065f46; margin: 0; padding-left: 18px; font-size: 14px; line-height: 1.4;\">\n        <li style=\"margin-bottom: 5px;\">Klicka p\u00E5 \u00E5terst\u00E4llningsl\u00E4nken ovan</li>\n        <li style=\"margin-bottom: 5px;\">Ange ditt nya l\u00F6senord (minst 6 tecken)</li>\n        <li style=\"margin-bottom: 5px;\">Logga in p\u00E5 ditt konto</li>\n        <li>B\u00F6rja anv\u00E4nda ditt konto igen</li>\n      </ol>\n    </div>\n    \n    <div style=\"text-align: center; margin: 25px 0;\">\n      <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_SECONDARY, "; line-height: 1.6; margin-bottom: 12px; font-size: 14px;\">Efter att du har \u00E5terst\u00E4llt ditt l\u00F6senord kan du logga in h\u00E4r:</p>\n      <a href=\"").concat(loginUrl, "\" style=\"display: inline-block; background-color: transparent; color: ").concat(config_1.EMAIL_CONFIG.COLORS.PRIMARY, "; text-decoration: none; padding: 10px 20px; border-radius: 6px; font-weight: bold; font-size: 14px; border: 2px solid ").concat(config_1.EMAIL_CONFIG.COLORS.PRIMARY, ";\">Logga in p\u00E5 B8Shield</a>\n    </div>\n\n    ").concat(userAgent || timestamp ? "\n    <div style=\"background-color: #f3f4f6; padding: 12px; border-radius: 4px; margin-bottom: 20px;\">\n      <h4 style=\"color: ".concat(config_1.EMAIL_CONFIG.COLORS.TEXT_MUTED, "; margin-top: 0; margin-bottom: 8px; font-size: 13px;\">[S\u00C4KERHETSINFO] BEG\u00C4RAN GJORD FR\u00C5N:</h4>\n      <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_MUTED, "; margin: 0; font-size: 12px; font-family: monospace;\">\n        ").concat(timestamp ? "<strong>Tid:</strong> ".concat(timestamp, "<br>") : '', "\n        ").concat(userAgent ? "<strong>Enhet:</strong> ".concat(userAgent, "<br>") : '', "\n        <strong>E-post:</strong> ").concat(email, "\n      </p>\n    </div>\n    ") : '', "\n    \n    <div style=\"border-top: 1px solid ").concat(config_1.EMAIL_CONFIG.COLORS.BORDER, "; padding-top: 15px; margin-top: 25px;\">\n      <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_MUTED, "; font-size: 13px; margin: 0; line-height: 1.4;\">Med v\u00E4nliga h\u00E4lsningar,<br><strong>B8Shield Team</strong><br>JPH Innovation AB</p>\n    </div>\n  </div>\n</div>")
        },
        'en-GB': {
            subject: 'Reset your B8Shield password',
            html: "<div style=\"font-family: ".concat(config_1.EMAIL_CONFIG.TEMPLATES.FONT_FAMILY, "; max-width: ").concat(config_1.EMAIL_CONFIG.TEMPLATES.MAX_WIDTH, "; margin: 0 auto; background-color: ").concat(config_1.EMAIL_CONFIG.COLORS.BACKGROUND, "; padding: 15px;\">\n  <div style=\"background-color: white; border-radius: ").concat(config_1.EMAIL_CONFIG.TEMPLATES.BORDER_RADIUS, "; padding: 25px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);\">\n    <div style=\"text-align: center; margin-bottom: 25px;\">\n      <img src=\"").concat(config_1.EMAIL_CONFIG.URLS.LOGO_URL, "\" alt=\"B8Shield\" style=\"max-width: 180px; height: auto; display: block; margin: 0 auto;\">\n    </div>\n    \n    <h2 style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_PRIMARY, "; margin-bottom: 18px; font-size: 20px; line-height: 1.3;\">Reset your password</h2>\n    <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_SECONDARY, "; line-height: 1.6; margin-bottom: 18px; font-size: 15px;\">Hello!</p>\n    <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_SECONDARY, "; line-height: 1.6; margin-bottom: 20px; font-size: 15px;\">We received a request to reset the password for your B8Shield account associated with <strong>").concat(email, "</strong>.</p>\n    \n    <div style=\"background-color: #fef3c7; border-left: 4px solid ").concat(config_1.EMAIL_CONFIG.COLORS.WARNING, "; padding: 15px; margin-bottom: 20px; border-radius: 4px;\">\n      <h4 style=\"color: #92400e; margin-top: 0; margin-bottom: 10px; font-size: 15px;\">[SECURITY] IMPORTANT INFORMATION:</h4>\n      <ul style=\"color: #92400e; margin: 0; padding-left: 18px; font-size: 14px; line-height: 1.4;\">\n        <li style=\"margin-bottom: 5px;\">This link is valid for <strong>60 minutes</strong></li>\n        <li style=\"margin-bottom: 5px;\">The link can only be used once</li>\n        <li>If you didn't request this reset, please ignore this email</li>\n      </ul>\n    </div>\n    \n    <div style=\"background-color: #eff6ff; padding: 18px; border-radius: 6px; margin-bottom: 20px;\">\n      <h4 style=\"color: #1e40af; margin-top: 0; margin-bottom: 12px; font-size: 15px;\">[RESET] CLICK HERE TO RESET:</h4>\n      <div style=\"text-align: center; margin: 18px 0;\">\n        <a href=\"").concat(resetUrl, "\" style=\"display: inline-block; background-color: ").concat(config_1.EMAIL_CONFIG.COLORS.PRIMARY, "; color: #ffffff; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: bold; font-size: 15px; border: 2px solid ").concat(config_1.EMAIL_CONFIG.COLORS.PRIMARY, ";\">Reset my password</a>\n      </div>\n      <p style=\"color: #1e40af; margin-bottom: 8px; font-size: 13px;\">Or copy and paste this link into your browser:</p>\n      <div style=\"background-color: #dbeafe; padding: 10px; border-radius: 4px; border-left: 4px solid #2563eb; word-break: break-all; font-size: 13px;\">\n        <a href=\"").concat(resetUrl, "\" style=\"color: #1e40af; text-decoration: none;\">").concat(resetUrl, "</a>\n      </div>\n    </div>\n    \n    <div style=\"background-color: #ecfdf5; padding: 15px; border-radius: 6px; margin-bottom: 20px;\">\n      <h4 style=\"color: #065f46; margin-top: 0; margin-bottom: 12px; font-size: 15px;\">[NEXT STEPS] AFTER RESET:</h4>\n      <ol style=\"color: #065f46; margin: 0; padding-left: 18px; font-size: 14px; line-height: 1.4;\">\n        <li style=\"margin-bottom: 5px;\">Click the reset link above</li>\n        <li style=\"margin-bottom: 5px;\">Enter your new password (minimum 6 characters)</li>\n        <li style=\"margin-bottom: 5px;\">Log in to your account</li>\n        <li>Start using your account again</li>\n      </ol>\n    </div>\n    \n    <div style=\"text-align: center; margin: 25px 0;\">\n      <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_SECONDARY, "; line-height: 1.6; margin-bottom: 12px; font-size: 14px;\">After resetting your password, you can log in here:</p>\n      <a href=\"").concat(loginUrl, "\" style=\"display: inline-block; background-color: transparent; color: ").concat(config_1.EMAIL_CONFIG.COLORS.PRIMARY, "; text-decoration: none; padding: 10px 20px; border-radius: 6px; font-weight: bold; font-size: 14px; border: 2px solid ").concat(config_1.EMAIL_CONFIG.COLORS.PRIMARY, ";\">Log in to B8Shield</a>\n    </div>\n\n    ").concat(userAgent || timestamp ? "\n    <div style=\"background-color: #f3f4f6; padding: 12px; border-radius: 4px; margin-bottom: 20px;\">\n      <h4 style=\"color: ".concat(config_1.EMAIL_CONFIG.COLORS.TEXT_MUTED, "; margin-top: 0; margin-bottom: 8px; font-size: 13px;\">[SECURITY INFO] REQUEST MADE FROM:</h4>\n      <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_MUTED, "; margin: 0; font-size: 12px; font-family: monospace;\">\n        ").concat(timestamp ? "<strong>Time:</strong> ".concat(timestamp, "<br>") : '', "\n        ").concat(userAgent ? "<strong>Device:</strong> ".concat(userAgent, "<br>") : '', "\n        <strong>Email:</strong> ").concat(email, "\n      </p>\n    </div>\n    ") : '', "\n    \n    <div style=\"border-top: 1px solid ").concat(config_1.EMAIL_CONFIG.COLORS.BORDER, "; padding-top: 15px; margin-top: 25px;\">\n      <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_MUTED, "; font-size: 13px; margin: 0; line-height: 1.4;\">Best regards,<br><strong>B8Shield Team</strong><br>JPH Innovation AB</p>\n    </div>\n  </div>\n</div>")
        },
        'en-US': {
            subject: 'Reset your B8Shield password',
            html: "<div style=\"font-family: ".concat(config_1.EMAIL_CONFIG.TEMPLATES.FONT_FAMILY, "; max-width: ").concat(config_1.EMAIL_CONFIG.TEMPLATES.MAX_WIDTH, "; margin: 0 auto; background-color: ").concat(config_1.EMAIL_CONFIG.COLORS.BACKGROUND, "; padding: 15px;\">\n  <div style=\"background-color: white; border-radius: ").concat(config_1.EMAIL_CONFIG.TEMPLATES.BORDER_RADIUS, "; padding: 25px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);\">\n    <div style=\"text-align: center; margin-bottom: 25px;\">\n      <img src=\"").concat(config_1.EMAIL_CONFIG.URLS.LOGO_URL, "\" alt=\"B8Shield\" style=\"max-width: 180px; height: auto; display: block; margin: 0 auto;\">\n    </div>\n    \n    <h2 style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_PRIMARY, "; margin-bottom: 18px; font-size: 20px; line-height: 1.3;\">Reset your password</h2>\n    <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_SECONDARY, "; line-height: 1.6; margin-bottom: 18px; font-size: 15px;\">Hello!</p>\n    <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_SECONDARY, "; line-height: 1.6; margin-bottom: 20px; font-size: 15px;\">We received a request to reset the password for your B8Shield account associated with <strong>").concat(email, "</strong>.</p>\n    \n    <div style=\"background-color: #fef3c7; border-left: 4px solid ").concat(config_1.EMAIL_CONFIG.COLORS.WARNING, "; padding: 15px; margin-bottom: 20px; border-radius: 4px;\">\n      <h4 style=\"color: #92400e; margin-top: 0; margin-bottom: 10px; font-size: 15px;\">[SECURITY] IMPORTANT INFORMATION:</h4>\n      <ul style=\"color: #92400e; margin: 0; padding-left: 18px; font-size: 14px; line-height: 1.4;\">\n        <li style=\"margin-bottom: 5px;\">This link is valid for <strong>60 minutes</strong></li>\n        <li style=\"margin-bottom: 5px;\">The link can only be used once</li>\n        <li>If you didn't request this reset, please ignore this email</li>\n      </ul>\n    </div>\n    \n    <div style=\"background-color: #eff6ff; padding: 18px; border-radius: 6px; margin-bottom: 20px;\">\n      <h4 style=\"color: #1e40af; margin-top: 0; margin-bottom: 12px; font-size: 15px;\">[RESET] CLICK HERE TO RESET:</h4>\n      <div style=\"text-align: center; margin: 18px 0;\">\n        <a href=\"").concat(resetUrl, "\" style=\"display: inline-block; background-color: ").concat(config_1.EMAIL_CONFIG.COLORS.PRIMARY, "; color: #ffffff; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: bold; font-size: 15px; border: 2px solid ").concat(config_1.EMAIL_CONFIG.COLORS.PRIMARY, ";\">Reset my password</a>\n      </div>\n      <p style=\"color: #1e40af; margin-bottom: 8px; font-size: 13px;\">Or copy and paste this link into your browser:</p>\n      <div style=\"background-color: #dbeafe; padding: 10px; border-radius: 4px; border-left: 4px solid #2563eb; word-break: break-all; font-size: 13px;\">\n        <a href=\"").concat(resetUrl, "\" style=\"color: #1e40af; text-decoration: none;\">").concat(resetUrl, "</a>\n      </div>\n    </div>\n    \n    <div style=\"background-color: #ecfdf5; padding: 15px; border-radius: 6px; margin-bottom: 20px;\">\n      <h4 style=\"color: #065f46; margin-top: 0; margin-bottom: 12px; font-size: 15px;\">[NEXT STEPS] AFTER RESET:</h4>\n      <ol style=\"color: #065f46; margin: 0; padding-left: 18px; font-size: 14px; line-height: 1.4;\">\n        <li style=\"margin-bottom: 5px;\">Click the reset link above</li>\n        <li style=\"margin-bottom: 5px;\">Enter your new password (minimum 6 characters)</li>\n        <li style=\"margin-bottom: 5px;\">Log in to your account</li>\n        <li>Start using your account again</li>\n      </ol>\n    </div>\n    \n    <div style=\"text-align: center; margin: 25px 0;\">\n      <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_SECONDARY, "; line-height: 1.6; margin-bottom: 12px; font-size: 14px;\">After resetting your password, you can log in here:</p>\n      <a href=\"").concat(loginUrl, "\" style=\"display: inline-block; background-color: transparent; color: ").concat(config_1.EMAIL_CONFIG.COLORS.PRIMARY, "; text-decoration: none; padding: 10px 20px; border-radius: 6px; font-weight: bold; font-size: 14px; border: 2px solid ").concat(config_1.EMAIL_CONFIG.COLORS.PRIMARY, ";\">Log in to B8Shield</a>\n    </div>\n\n    ").concat(userAgent || timestamp ? "\n    <div style=\"background-color: #f3f4f6; padding: 12px; border-radius: 4px; margin-bottom: 20px;\">\n      <h4 style=\"color: ".concat(config_1.EMAIL_CONFIG.COLORS.TEXT_MUTED, "; margin-top: 0; margin-bottom: 8px; font-size: 13px;\">[SECURITY INFO] REQUEST MADE FROM:</h4>\n      <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_MUTED, "; margin: 0; font-size: 12px; font-family: monospace;\">\n        ").concat(timestamp ? "<strong>Time:</strong> ".concat(timestamp, "<br>") : '', "\n        ").concat(userAgent ? "<strong>Device:</strong> ".concat(userAgent, "<br>") : '', "\n        <strong>Email:</strong> ").concat(email, "\n      </p>\n    </div>\n    ") : '', "\n    \n    <div style=\"border-top: 1px solid ").concat(config_1.EMAIL_CONFIG.COLORS.BORDER, "; padding-top: 15px; margin-top: 25px;\">\n      <p style=\"color: ").concat(config_1.EMAIL_CONFIG.COLORS.TEXT_MUTED, "; font-size: 13px; margin: 0; line-height: 1.4;\">Best regards,<br><strong>B8Shield Team</strong><br>JPH Innovation AB</p>\n    </div>\n  </div>\n</div>")
        }
    };
    var template = templates[lang] || templates['sv-SE'];
    return {
        subject: template.subject,
        html: template.html
    };
}
exports.generatePasswordResetTemplate = generatePasswordResetTemplate;
